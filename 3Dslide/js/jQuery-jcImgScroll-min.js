(function(e){e.fn.jcImgScroll=function(t){var n={speed:400,width:618,height:342,offsetX:100,setZoom:.7,loadClass:"loading",position:"center",count:5,arrow:{width:110,height:342,x:20,y:0},NumBtn:!1,setNumBtn:{width:19,height:18,x:0,y:362},title:!0,setTitle:{height:35,border:8,bgColor:"#6ba600",color:"#fff",padding:20,opacity:.8}},t=e.extend(n,t);return this.each(function(){function p(e,t,n){a.hide().css("z-index",-1).eq(e).addClass("select").siblings().removeClass("select"),a.eq(e).find("img").fadeTo(100,.5).fadeTo(200,1),n.eq(e).addClass("curr").siblings().removeClass("curr");var r=f(e,s),i=r.length,o=null;for(o=0;o<i;o++)l(a.eq(r[o]),t[o][0],t[o][1],t[o][2],t[o][3],t[o][4],150)}var n=e(this),r=[],i=0,s=0,o=e("a",n),u=e("ul",n),a=e("li",u),f=function(e,t){var n=[e];for(b=0;b<=t;b++)n.push(e+(b+1)),n.unshift(e-(b+1)<0?99:e-(b+1));return n},l=function(e,t,n,r,i,s,o){e.show().css("z-index",s).animate({top:n,left:t,height:i,width:r},o)};object=function(e){this.length=e,this.setNum=t.setNumBtn,this.NumBtnDom=function(e,t,n,r,i){return'<dl style="z-index:11;width:'+t+"px;height:"+n+"px;position:absolute;left:"+r+"px;top:"+i+'px;">'+e+"<dl>"},this.arrow=function(e,t,n,r,i,s){return'<em class="sPrev" id="sPrev" style="position:absolute;cursor:pointer;z-index:10;width:'+n+"px;height:"+r+"px;left:"+(e-n-i)+'px;"></em><em class="sNext" id="sNext" style="position:absolute;cursor:pointer;z-index:10;width:'+n+"px;height:"+r+"px;left:"+(t+i)+"px;top:"+s+'px;"></em>'},this.hoverDom=function(e,t,n,r,i,s,o,u){return'<div style="display:none;cursor:pointer;border:'+r+"px solid "+i+";width:"+(t-r*2)+"px;height:"+(n-r*2)+'px;position:absolute;z-index:1;"></div><b style="display:none;padding:0 '+s+"px;width:"+(t-s*2-r*2)+"px;color:"+o+";text-shadow:none;background:"+i+";position:absolute;z-index:2;left:"+r+"px;bottom:"+r+"px;height:0px;overflow:hidden;line-height:"+(u+5)+'px;">'+e+"</b>"}},object.prototype.Initial=function(e){if(t.count>this.length)return alert('"Count" parameter can not be greater than the total number of pictures, you must base !'),!1;if(t.count<0)return alert('"Count" parameter can not be negative, you must base  !'),!1;if(t.count%2===0)return alert('"Count" parameter must base  !'),!1;this.arrNumList=[],this.arrImgObj=[],this.arrData=[],this.centerIdx=Math.round(this.length/2)-1,this.centerCount=Math.floor(t.count/2)-1,i=this.centerIdx,s=this.centerCount,this.indexArr=f(this.centerIdx,this.centerCount),u.css({position:"relative",width:t.width,height:t.height,margin:"0 auto"});var r=null,o=null,c=null,h=null,p=2,d=this.centerCount+1,v=this.indexArr[this.centerCount+1],m=u.offset().left,g=u.offset().left+t.width,y=function(e,n){var r=null;switch(e){case"top":r=0;break;case"center":r=(t.height-n)*.5;break;case"bottom":r=t.height-n;break;default:alert('Parameters "position" Error, "top", "center", "bottom" !')}return r};for(r=0;r<this.length;r++){var b=a.eq(r),w=b.find("a"),E=w.attr("path"),S=w.attr("title");b.addClass(t.loadClass).css({width:t.width,height:t.height,position:"absolute",display:"none",overflow:"hidden","z-index":0}),oImg=new Image,oImg.src=E,oImg.title=S,oImg.width=t.width,oImg.height=t.height,this.arrImgObj.push(oImg);for(c=0;c<t.count;c++)if(r===this.indexArr[c]){var x=r>v?r-p:r,T=r>v?r-this.centerIdx:d,N=Math.round(t.width/T*t.setZoom),C=Math.round(t.height/T*t.setZoom),k=Math.round(y(t.position,C));left=Math.round(t.offsetX*T),r<v&&(d-=1,left*=-1),r>v&&(p+=2,left=t.width-N+left),r==v&&(b.addClass("select"),N=t.width,C=t.height,left=0,k=0),l(b,left,k,N,C,x,t.speed*1.5),this.arrData.push([left,k,N,C,x]);break}t.title&&b.prepend(this.hoverDom(S,t.width,t.height,t.setTitle.border,t.setTitle.bgColor,t.setTitle.padding,t.setTitle.color,t.setTitle.height)).find("div").css("opacity",0).end().find("b").css("opacity",0);if(t.NumBtn){var L="cursor:pointer;float:left;height:"+this.setNum.height+"px;width:"+this.setNum.width+"px;overflow:hidden;";this.centerIdx===r?h='<dd class="curr" style="'+L+'">'+r+"</dd>":h='<dd style="'+L+'">'+r+"</dd>",this.arrNumList.push(h)}}n.prepend(this.arrow(m,g,t.arrow.width,t.arrow.height,t.arrow.x,t.arrow.y)).find("em").show(0);if(this.arrNumList.length!=0){var A=this.arrNumList.join(""),O=this.setNum.width*this.length,M=this.setNum.height,_=(n.width()-O)*.5+this.setNum.x;n.append(this.NumBtnDom(A,O,M,_,this.setNum.y)).find("dl").show()}return e.call(this,this.arrImgObj),this.arrData};var c=new object(o.length);r=c.Initial(function(n){for(var r in n)n[r].tmp=r,n[r].onload=function(){var r=this.tmp,i=o.eq(r);i.html(e(n[r])).find("img").fadeIn(600).parents("li").removeClass(t.loadClass)};(function(e){var t=null,n=arguments,r=n.length;for(t=1;t<r;t++)delete e[n[t]]})(this,"arrImgObj","arrNumList","NumBtnDom","arrow","hoverDom","setNum","indexArr")}),c.Initial=null,c=null,object=null;var h=o.length,d=e("#sPrev",n),v=e("#sNext",n),m=e("dd",n);d.click(function(){return i>0&&(i-=1,p(i,r,m)),!1}),v.click(function(){return i<h-1&&(i+=1,p(i,r,m)),!1}),m.click(function(){i=e(this).index(),p(i,r,m)});if(t.title){var g=t.setTitle.border,y=t.height,w=t.width,E=t.setTitle.height;e("li.select",n).live&&e("li.select",n).live("mouseover",function(){return e(this).find("div").show().animate({opacity:t.setTitle.opacity},100),e(this).find("b").show().delay(100).stop().animate({height:E,opacity:t.setTitle.opacity},150),!1}),a.mouseleave(function(){return e(this).find("b").show().stop().animate({height:0,opacity:0},150),e(this).find("div").delay(150).stop().animate({opacity:0},100),!1})}return!1})}})(jQuery)